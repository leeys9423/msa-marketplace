# 마이크로서비스 프로젝트 구축 단계별 순서

## 1단계: 기본 인프라 설정

1. **Eureka 서버 구축**

   - 서비스 등록 및 발견을 위한 중앙 레지스트리 설정

2. **Config 서버 구축**

   - 중앙 집중식 구성 관리
   - Git 저장소 설정

3. **API Gateway 구축**

   - 라우팅 규칙 설정
   - 기본 필터 구성

4. **로컬 개발 환경 설정**
   - Docker Compose로 의존성 서비스 구성
   - PostgreSQL, MongoDB, Redis, Kafka 컨테이너 설정

## 2단계: 핵심 서비스 개발

5. **사용자 서비스 개발**

   - 인증/인가 기능 구현
   - 사용자 CRUD 작업
   - Eureka 클라이언트 연동

6. **상품 서비스 개발**

   - 상품 CRUD 작업
   - 카테고리 관리
   - MongoDB 연동
   - TypeScript/NestJS 설정

7. **주문 서비스 개발**

   - 주문 생성 및 관리
   - 배송 정보 처리
   - Eureka 클라이언트 연동

8. **결제 서비스 개발**
   - 결제 처리 구현
   - PG사 모의 연동
   - 환불 처리

## 3단계: 이벤트 기반 통신 구현

9. **Kafka 클러스터 설정**

   - 토픽 생성
   - Kafka Connect 설정 (선택적)

10. **도메인 이벤트 정의**

    - 각 서비스별 이벤트 스키마 정의
    - Avro 또는 JSON 스키마 등록

11. **이벤트 생산자 구현**

    - 각 서비스에서 도메인 이벤트 발행
    - 멱등성 및 순서 보장 고려

12. **이벤트 소비자 구현**
    - 이벤트 처리 및 상태 업데이트
    - 오류 처리 및 실패 전략

## 4단계: 보안 및 모니터링 구현

13. **중앙 인증 서비스**

    - JWT 토큰 관리
    - OAuth2/OIDC 구현 (선택적)

14. **모니터링 시스템 구축**

    - Prometheus + Grafana 설정
    - 서비스 건강 상태 모니터링

15. **로깅 시스템 구축**

    - ELK 스택 또는 CloudWatch 설정
    - 분산 로그 추적

16. **분산 추적 시스템**
    - Zipkin/Jaeger 설정
    - 서비스 간 요청 추적

## 5단계: 배포 파이프라인 구축

17. **Docker 이미지 빌드 자동화**

    - Dockerfile 작성
    - 멀티스테이지 빌드 최적화

18. **CI/CD 파이프라인 설정**

    - GitHub Actions 구성
    - 테스트, 빌드, 배포 자동화

19. **Kubernetes 배포 설정**

    - 서비스별 배포 매니페스트 작성
    - ConfigMap 및 Secret 관리

20. **인프라 프로비저닝**
    - AWS EKS 클러스터 설정
    - 필요한 AWS 서비스 프로비저닝

## 6단계: 성능 최적화 및 확장

21. **캐싱 전략 구현**

    - Redis를 활용한 데이터 캐싱
    - 분산 캐시 관리

22. **부하 테스트 및 성능 최적화**

    - 병목 지점 식별
    - 스케일링 전략 수립

23. **추가 기능 개발**

    - 검색, 추천 시스템 등 확장 기능
    - 새로운 서비스 통합

24. **회복성 패턴 구현**
    - Circuit Breaker
    - Retry 및 Fallback 전략

## 개발 우선순위 및 의존성

- **먼저 시작해야 할 서비스**: Eureka 서버 > Config 서버 > API Gateway > 사용자 서비스
- **독립적으로 개발 가능한 서비스**: 상품 서비스 (다른 서비스 없이도 기본 기능 개발 가능)
- **의존성이 있는 서비스**: 주문 서비스 (사용자 및 상품 서비스 의존) > 결제 서비스 (주문 서비스 의존)
